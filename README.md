# Crawl4AI ç½‘é¡µçˆ¬å–å’ŒAIåˆ†æç³»ç»Ÿ

## é¡¹ç›®ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªåŸºäº Crawl4AI çš„æ™ºèƒ½ç½‘é¡µçˆ¬å–å’ŒAIåˆ†æç³»ç»Ÿï¼Œé›†æˆäº†ç°ä»£åŒ–çš„Webç•Œé¢ã€æ•°æ®åº“å­˜å‚¨å’ŒMinIOå¯¹è±¡å­˜å‚¨ã€‚ç³»ç»Ÿæä¾›äº†å®Œæ•´çš„ç½‘é¡µå†…å®¹æŠ“å–ã€AIæ™ºèƒ½åˆ†æã€æ–‡ä»¶ç®¡ç†å’Œå†å²è®°å½•åŠŸèƒ½ã€‚

## ä¸»è¦ç‰¹æ€§

### ğŸš€ æ ¸å¿ƒåŠŸèƒ½
- **æ™ºèƒ½ç½‘é¡µçˆ¬å–**: æ”¯æŒå¤šç§å†…å®¹æºï¼ˆcleaned_htmlã€raw_htmlã€fit_htmlï¼‰
- **AIæ™ºèƒ½åˆ†æ**: é›†æˆå¤šç§AIåˆ†ææ¨¡å¼ï¼ˆå†…å®¹æ‘˜è¦ã€å…³é”®ç‚¹æå–ã€ç»“æ„åŒ–æ•°æ®ç­‰ï¼‰
- **ç°ä»£åŒ–Webç•Œé¢**: å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒå®æ—¶æ“ä½œå’Œç»“æœå±•ç¤º
- **æ•°æ®æŒä¹…åŒ–**: PostgreSQLæ•°æ®åº“å­˜å‚¨ä»»åŠ¡è®°å½•å’Œå…ƒæ•°æ®
- **æ–‡ä»¶å­˜å‚¨**: MinIOå¯¹è±¡å­˜å‚¨ç®¡ç†æ‰€æœ‰ç”Ÿæˆçš„æ–‡ä»¶
- **å†å²è®°å½•**: å®Œæ•´çš„çˆ¬å–å†å²å’Œæ–‡ä»¶ç®¡ç†åŠŸèƒ½

### ğŸ›  æŠ€æœ¯æ¶æ„
- **åç«¯æ¡†æ¶**: FastAPI + Python 3.12
- **æ•°æ®åº“**: PostgreSQL + SQLAlchemy ORM
- **å¯¹è±¡å­˜å‚¨**: MinIO
- **å‰ç«¯**: HTML5 + CSS3 + JavaScript (åŸç”Ÿ)
- **AIé›†æˆ**: æ”¯æŒå¤šç§LLMæä¾›å•†ï¼ˆOpenAIã€Azure OpenAIã€æœ¬åœ°LLMã€é€šä¹‰åƒé—®ï¼‰

## ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Web ç•Œé¢      â”‚    â”‚   FastAPI æœåŠ¡  â”‚    â”‚   PostgreSQL    â”‚
â”‚   (å‰ç«¯)        â”‚â—„â”€â”€â–ºâ”‚   (åç«¯API)     â”‚â—„â”€â”€â–ºâ”‚   (æ•°æ®åº“)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚   Crawl4AI      â”‚    â”‚   MinIO         â”‚
                       â”‚   (çˆ¬å–å¼•æ“)    â”‚    â”‚   (æ–‡ä»¶å­˜å‚¨)    â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Python 3.12+
- PostgreSQL æ•°æ®åº“
- MinIO å¯¹è±¡å­˜å‚¨æœåŠ¡

### å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### é…ç½®æ–‡ä»¶

#### 1. æ•°æ®åº“é…ç½® (`config/database_config.py`)
```python
DATABASE_CONFIG = {
    'host': 'your_postgres_host',
    'port': 5432,
    'database': 'your_database',
    'username': 'your_username',
    'password': 'your_password'
}
```

#### 2. MinIOé…ç½® (`config/minio_config.py`)
```python
MINIO_CONFIG = {
    'endpoint': 'your_minio_host:9000',
    'access_key': 'your_access_key',
    'secret_key': 'your_secret_key',
    'secure': False
}
```

#### 3. AIé…ç½® (`config/ai_config.yaml`)
```yaml
llm_providers:
  openai:
    api_key: "your_openai_api_key"
    base_url: "https://api.openai.com/v1"
    model: "gpt-4"
  # å…¶ä»–æä¾›å•†é…ç½®...
```

### å¯åŠ¨æœåŠ¡

```bash
# å¯åŠ¨æœåŠ¡å™¨ï¼ˆé»˜è®¤ç«¯å£8000ï¼‰
python markdown/content_source_server.py

# æŒ‡å®šç«¯å£å¯åŠ¨
python markdown/content_source_server.py --port 8080

# æŒ‡å®šä¸»æœºå’Œç«¯å£
python markdown/content_source_server.py --host 0.0.0.0 --port 8080
```

### è®¿é—®ç³»ç»Ÿ

- **Webç•Œé¢**: http://localhost:8080
- **APIæ–‡æ¡£**: http://localhost:8080/docs
- **APIä¿¡æ¯**: http://localhost:8080/api

## åŠŸèƒ½è¯¦è§£

### 1. ç½‘é¡µçˆ¬å–åŠŸèƒ½

#### æ”¯æŒçš„å†…å®¹æºç±»å‹ï¼š
- `cleaned_html`: æ¸…ç†åçš„HTMLå†…å®¹ï¼ˆæ¨èï¼‰
- `raw_html`: åŸå§‹HTMLå†…å®¹
- `fit_html`: é€‚é…åçš„HTMLå†…å®¹

#### AIåˆ†ææ¨¡å¼ï¼š
- `content_summary`: å†…å®¹æ‘˜è¦
- `key_points`: å…³é”®ç‚¹æå–
- `structured_data`: ç»“æ„åŒ–æ•°æ®æå–
- `entities`: å®ä½“è¯†åˆ«
- `sentiment`: æƒ…æ„Ÿåˆ†æ

### 2. Webç•Œé¢åŠŸèƒ½

#### ä¸»è¦é¡µé¢ç»„ä»¶ï¼š
- **çˆ¬å–è¡¨å•**: è¾“å…¥URLå’Œé…ç½®å‚æ•°
- **å®æ—¶ç»“æœ**: æ˜¾ç¤ºçˆ¬å–è¿›åº¦å’Œç»“æœ
- **å†å²è®°å½•**: æŸ¥çœ‹æ‰€æœ‰çˆ¬å–ä»»åŠ¡
- **æ–‡ä»¶ç®¡ç†**: æµè§ˆå’Œé¢„è§ˆç”Ÿæˆçš„æ–‡ä»¶

#### äº¤äº’ç‰¹æ€§ï¼š
- å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒç§»åŠ¨ç«¯
- å®æ—¶çŠ¶æ€æ›´æ–°
- æ–‡ä»¶åœ¨çº¿é¢„è§ˆ
- ä¸€é”®ä¸‹è½½åŠŸèƒ½

### 3. APIæ¥å£

#### æ ¸å¿ƒæ¥å£ï¼š
```
POST /crawl              # å®Œæ•´çˆ¬å–å’Œåˆ†æ
GET  /crawl_simple       # ç®€åŒ–çˆ¬å–æ¥å£
GET  /api/history        # è·å–å†å²è®°å½•
GET  /api/files/{task_id} # è·å–ä»»åŠ¡æ–‡ä»¶
GET  /api/preview/{file_id} # é¢„è§ˆæ–‡ä»¶å†…å®¹
```

#### è¯·æ±‚ç¤ºä¾‹ï¼š
```bash
# çˆ¬å–ç½‘é¡µ
curl -X POST "http://localhost:8080/crawl" \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://example.com",
    "content_source": "cleaned_html",
    "ai_modes": ["content_summary", "key_points"],
    "save_files": true
  }'
```

### 4. æ•°æ®å­˜å‚¨

#### æ•°æ®åº“è¡¨ç»“æ„ï¼š
- `crawl_tasks`: çˆ¬å–ä»»åŠ¡è®°å½•
- `crawl_files`: æ–‡ä»¶å…ƒæ•°æ®è®°å½•

#### MinIOå­˜å‚¨æ¡¶ï¼š
- `crawl4ai-files`: é€šç”¨æ–‡ä»¶å­˜å‚¨
- `crawl4ai-markdown`: Markdownæ–‡ä»¶
- `crawl4ai-ai-results`: AIåˆ†æç»“æœ
- `crawl4ai-json`: JSONæ ¼å¼æ–‡ä»¶

## å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„

```
crawl4ai-demo/
â”œâ”€â”€ config/                 # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ ai_config.yaml     # AIé…ç½®
â”‚   â”œâ”€â”€ database_config.py # æ•°æ®åº“é…ç½®
â”‚   â””â”€â”€ minio_config.py    # MinIOé…ç½®
â”œâ”€â”€ models/                # æ•°æ®æ¨¡å‹
â”‚   â””â”€â”€ database_models.py # æ•°æ®åº“æ¨¡å‹
â”œâ”€â”€ utils/                 # å·¥å…·æ¨¡å—
â”‚   â””â”€â”€ ai_extractor.py    # AIæå–å™¨
â”œâ”€â”€ templates/             # HTMLæ¨¡æ¿
â”‚   â””â”€â”€ index.html         # ä¸»é¡µæ¨¡æ¿
â”œâ”€â”€ static/                # é™æ€èµ„æº
â”‚   â”œâ”€â”€ css/style.css      # æ ·å¼æ–‡ä»¶
â”‚   â””â”€â”€ js/app.js          # JavaScriptæ–‡ä»¶
â”œâ”€â”€ markdown/              # æ ¸å¿ƒæœåŠ¡
â”‚   â””â”€â”€ content_source_server.py # ä¸»æœåŠ¡å™¨
â”œâ”€â”€ logs/                  # æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ requirements.txt       # ä¾èµ–åˆ—è¡¨
â””â”€â”€ README.md             # é¡¹ç›®æ–‡æ¡£
```

### æ‰©å±•å¼€å‘

#### æ·»åŠ æ–°çš„AIåˆ†ææ¨¡å¼ï¼š
1. åœ¨ `config/ai_config.yaml` ä¸­æ·»åŠ æ–°æ¨¡å¼é…ç½®
2. åœ¨ `utils/ai_extractor.py` ä¸­å®ç°åˆ†æé€»è¾‘
3. æ›´æ–°å‰ç«¯ç•Œé¢é€‰é¡¹

#### æ·»åŠ æ–°çš„å­˜å‚¨åç«¯ï¼š
1. åœ¨ `config/` ç›®å½•åˆ›å»ºæ–°çš„é…ç½®æ–‡ä»¶
2. å®ç°å­˜å‚¨ç®¡ç†å™¨ç±»
3. åœ¨æœåŠ¡å™¨ä¸­é›†æˆæ–°çš„å­˜å‚¨åç«¯

### æ—¥å¿—å’Œç›‘æ§

#### æ—¥å¿—æ–‡ä»¶ä½ç½®ï¼š
- æœåŠ¡å™¨æ—¥å¿—: `logs/server.log`
- AIæå–æ—¥å¿—: `logs/ai_extraction.log`

#### æ—¥å¿—çº§åˆ«ï¼š
- INFO: æ­£å¸¸æ“ä½œä¿¡æ¯
- ERROR: é”™è¯¯ä¿¡æ¯
- DEBUG: è°ƒè¯•ä¿¡æ¯ï¼ˆå¼€å‘æ¨¡å¼ï¼‰

## éƒ¨ç½²æŒ‡å—

### Dockeréƒ¨ç½²

```dockerfile
# Dockerfileç¤ºä¾‹
FROM python:3.12-slim

WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt

COPY . .
EXPOSE 8080

CMD ["python", "markdown/content_source_server.py", "--host", "0.0.0.0", "--port", "8080"]
```

### ç”Ÿäº§ç¯å¢ƒé…ç½®

#### 1. ä½¿ç”¨Gunicornéƒ¨ç½²ï¼š
```bash
pip install gunicorn
gunicorn -w 4 -k uvicorn.workers.UvicornWorker markdown.content_source_server:app --bind 0.0.0.0:8080
```

#### 2. Nginxåå‘ä»£ç†é…ç½®ï¼š
```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    location / {
        proxy_pass http://127.0.0.1:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. æ•°æ®åº“è¿æ¥å¤±è´¥
- æ£€æŸ¥æ•°æ®åº“é…ç½®ä¿¡æ¯
- ç¡®è®¤æ•°æ®åº“æœåŠ¡è¿è¡ŒçŠ¶æ€
- éªŒè¯ç½‘ç»œè¿æ¥

#### 2. MinIOè¿æ¥å¤±è´¥
- æ£€æŸ¥MinIOæœåŠ¡çŠ¶æ€
- éªŒè¯è®¿é—®å¯†é’¥é…ç½®
- ç¡®è®¤å­˜å‚¨æ¡¶æƒé™

#### 3. AIåˆ†æå¤±è´¥
- æ£€æŸ¥APIå¯†é’¥é…ç½®
- éªŒè¯ç½‘ç»œè¿æ¥
- æŸ¥çœ‹AIæœåŠ¡é…é¢

### æ€§èƒ½ä¼˜åŒ–

#### 1. æ•°æ®åº“ä¼˜åŒ–
- æ·»åŠ é€‚å½“çš„ç´¢å¼•
- å®šæœŸæ¸…ç†å†å²æ•°æ®
- ä½¿ç”¨è¿æ¥æ± 

#### 2. å­˜å‚¨ä¼˜åŒ–
- é…ç½®MinIOç¼“å­˜
- ä½¿ç”¨CDNåŠ é€Ÿ
- å‹ç¼©å­˜å‚¨æ–‡ä»¶

## è´¡çŒ®æŒ‡å—

### å¼€å‘è§„èŒƒ
- éµå¾ªSOLIDåŸåˆ™
- ä¿æŒé«˜å†…èšä½è€¦åˆ
- ä½¿ç”¨ä¸­æ–‡æ³¨é‡Š
- å®Œå–„é”™è¯¯å¤„ç†å’Œæ—¥å¿—

### æäº¤è§„èŒƒ
- åŠŸèƒ½å¼€å‘ä½¿ç”¨featureåˆ†æ”¯
- æäº¤ä¿¡æ¯ä½¿ç”¨ä¸­æ–‡æè¿°
- åŒ…å«å®Œæ•´çš„æµ‹è¯•ç”¨ä¾‹

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ï¼Œè¯¦è§ LICENSE æ–‡ä»¶ã€‚

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- æäº¤Issue
- å‘é€é‚®ä»¶
- é¡¹ç›®è®¨è®ºåŒº

---

**æ³¨æ„**: è¯·ç¡®ä¿åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¦¥å–„é…ç½®å®‰å…¨è®¾ç½®ï¼ŒåŒ…æ‹¬æ•°æ®åº“å¯†ç ã€APIå¯†é’¥ç­‰æ•æ„Ÿä¿¡æ¯ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸš€ å¼‚æ­¥ç½‘é¡µæŠ“å–
- ğŸ“ æ™ºèƒ½ Markdown ç”Ÿæˆ
- ğŸ”§ å¤šç§å†…å®¹æºé…ç½®
- ğŸ’¾ è‡ªåŠ¨æ–‡ä»¶ä¿å­˜
- ğŸ•’ æ—¶é—´æˆ³å‘½å
- ğŸ“Š è¯¦ç»†æ—¥å¿—è¾“å‡º
- ğŸ¤– **AI æ™ºèƒ½æ•°æ®æå–**
- ğŸ§  **å¤šç§ LLM æä¾›å•†æ”¯æŒ**
- ğŸ“‹ **ç»“æ„åŒ–å†…å®¹åˆ†æ**
- âš™ï¸ **çµæ´»çš„é…ç½®ç®¡ç†**
- ğŸŒ **HTTP API æœåŠ¡**
- ğŸ“¡ **RESTful æ¥å£**
- ğŸ”„ **å®æ—¶ç½‘é¡µå¤„ç†**

## é¡¹ç›®ç»“æ„

```
crawl4ai-demo/
â”œâ”€â”€ config/
â”‚   â””â”€â”€ ai_config.yaml                 # AI é…ç½®æ–‡ä»¶
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ ai_extractor.py               # AI æå–å™¨æ ¸å¿ƒæ¨¡å—
â”œâ”€â”€ markdown/
â”‚   â”œâ”€â”€ content_source_example.py      # è¯¦ç»†çš„å†…å®¹æºé…ç½®æ¼”ç¤º + AI åŠŸèƒ½
â”‚   â”œâ”€â”€ content_source_short_example.py # ç®€åŒ–çš„å†…å®¹æºé…ç½®æ¼”ç¤º + AI åŠŸèƒ½
â”‚   â””â”€â”€ content_source_server.py       # HTTP API æœåŠ¡å™¨
â”œâ”€â”€ doc/                               # è¾“å‡ºæ–‡ä»¶ç›®å½•
â”œâ”€â”€ logs/                              # æ—¥å¿—æ–‡ä»¶ç›®å½•
â””â”€â”€ README.md                          # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## å®‰è£…ä¾èµ–

åœ¨è¿è¡Œç¤ºä¾‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿å®‰è£…äº†å¿…è¦çš„ä¾èµ–ï¼š

```bash
pip install crawl4ai
pip install openai
pip install pyyaml
pip install fastapi
pip install uvicorn
pip install aiohttp
```

## HTTP API æœåŠ¡

### å¯åŠ¨æœåŠ¡å™¨

```bash
python markdown/content_source_server.py --port 8080
```

æœåŠ¡å™¨å¯åŠ¨åï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹åœ°å€è®¿é—®ï¼š
- API æœåŠ¡ï¼šhttp://localhost:8080
- API æ–‡æ¡£ï¼šhttp://localhost:8080/docs

### API æ¥å£

#### 1. å¥åº·æ£€æŸ¥
```bash
GET /health
```

#### 2. ç®€å•çˆ¬å–æ¥å£ï¼ˆGETï¼‰
```bash
GET /crawl_simple?url=https://example.com&ai_modes=content_summary&save_files=true
```

å‚æ•°è¯´æ˜ï¼š
- `url`: è¦çˆ¬å–çš„ç½‘é¡µURLï¼ˆå¿…éœ€ï¼‰
- `content_source`: å†…å®¹æºç±»å‹ï¼Œé»˜è®¤ä¸º "cleaned_html"
- `ai_modes`: AIåˆ†ææ¨¡å¼ï¼Œå¤šä¸ªæ¨¡å¼ç”¨é€—å·åˆ†éš”ï¼Œé»˜è®¤ä¸º "content_summary"
- `save_files`: æ˜¯å¦ä¿å­˜æ–‡ä»¶ï¼Œé»˜è®¤ä¸º true

#### 3. å®Œæ•´çˆ¬å–æ¥å£ï¼ˆPOSTï¼‰
```bash
POST /crawl
Content-Type: application/json

{
  "url": "https://example.com",
  "content_source": "cleaned_html",
  "ai_modes": ["content_summary", "key_points"],
  "save_files": true
}
```

### ä½¿ç”¨ç¤ºä¾‹

#### ä½¿ç”¨ curl æµ‹è¯• GET æ¥å£ï¼š
```bash
curl -X GET "http://localhost:8080/crawl_simple?url=https://httpbin.org/html&ai_modes=content_summary"
```

#### ä½¿ç”¨ PowerShell æµ‹è¯• POST æ¥å£ï¼š
```powershell
Invoke-RestMethod -Uri "http://localhost:8080/crawl" -Method POST -ContentType "application/json" -Body '{"url":"https://httpbin.org/html","ai_modes":["content_summary"],"save_files":true}'
```

### å“åº”æ ¼å¼

API è¿”å› JSON æ ¼å¼çš„å“åº”ï¼š

```json
{
  "success": true,
  "url": "https://example.com",
  "timestamp": "2025-09-19T16:38:23.123456",
  "markdown_content": "# ç½‘é¡µæ ‡é¢˜\n\nç½‘é¡µå†…å®¹...",
  "ai_results": {
    "content_summary": {
      "success": true,
      "mode": "content_summary",
      "provider": "qwen",
      "result": "å†…å®¹æ‘˜è¦...",
      "timestamp": "2025-09-19T16:38:35.216788"
    }
  },
  "saved_files": [
    "doc\\server_results_20250919_163823\\markdown_cleaned_html_20250919_163823.md",
    "doc\\server_results_20250919_163823\\ai_content_summary_20250919_163823.md",
    "doc\\server_results_20250919_163823\\complete_results_20250919_163823.json"
  ],
  "error": null
}
```

## å¿«é€Ÿå¼€å§‹

### 1. å‘½ä»¤è¡Œæ–¹å¼è¿è¡Œ

```bash
# è¿è¡Œå®Œæ•´åŠŸèƒ½æ¼”ç¤º
python markdown/content_source_example.py

# è¿è¡Œç®€åŒ–æ¼”ç¤º
python markdown/content_source_short_example.py
```

### 2. HTTP API æœåŠ¡æ–¹å¼

å¯åŠ¨ HTTP æœåŠ¡å™¨ï¼š

```bash
# ä½¿ç”¨é»˜è®¤é…ç½®å¯åŠ¨ï¼ˆç«¯å£8000ï¼‰
python markdown/content_source_server.py

# è‡ªå®šä¹‰ä¸»æœºå’Œç«¯å£
python markdown/content_source_server.py --host 127.0.0.1 --port 9000
```

æœåŠ¡å™¨å¯åŠ¨åï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è®¿é—®ï¼š

- **API æ–‡æ¡£**: http://localhost:8000/docs
- **æœåŠ¡çŠ¶æ€**: http://localhost:8000/
- **å¥åº·æ£€æŸ¥**: http://localhost:8000/health

### 3. API æ¥å£ä½¿ç”¨

#### ç®€å•çˆ¬å–æ¥å£ï¼ˆGET è¯·æ±‚ï¼‰

```bash
# åŸºæœ¬ç”¨æ³•
curl "http://localhost:8000/crawl_simple?url=https://example.com"

# æŒ‡å®šåˆ†ææ¨¡å¼
curl "http://localhost:8000/crawl_simple?url=https://example.com&ai_modes=structured_data,content_summary,key_points"

# æŒ‡å®šå†…å®¹æºç±»å‹
curl "http://localhost:8000/crawl_simple?url=https://example.com&content_source=cleaned_html"
```

#### å®Œæ•´åŠŸèƒ½æ¥å£ï¼ˆPOST è¯·æ±‚ï¼‰

```bash
curl -X POST "http://localhost:8000/crawl" \
     -H "Content-Type: application/json" \
     -d '{
       "url": "https://example.com",
       "content_source": "cleaned_html",
       "ai_modes": ["structured_data", "content_summary", "key_points"],
       "save_files": true
     }'
```

#### è·å–ç³»ç»Ÿä¿¡æ¯

```bash
# è·å–å¯ç”¨çš„ AI æä¾›å•†
curl "http://localhost:8000/providers"

# è·å–å¯ç”¨çš„åˆ†ææ¨¡å¼
curl "http://localhost:8000/modes"
```

## AI é…ç½®è®¾ç½®

### 1. é…ç½®æ–‡ä»¶è¯´æ˜

é¡¹ç›®ä½¿ç”¨ `config/ai_config.yaml` æ–‡ä»¶ç®¡ç† AI ç›¸å…³é…ç½®ï¼š

```yaml
# LLM æä¾›å•†é…ç½®
providers:
  openai:
    api_key: "your-openai-api-key"
    base_url: "https://api.openai.com/v1"
    model: "gpt-3.5-turbo"
    
  local_llm:
    base_url: "http://localhost:11434/v1"
    model: "llama2"
    api_key: "not-needed"

# é»˜è®¤ä½¿ç”¨çš„æä¾›å•†
default_provider: "openai"

# AI æå–æ¨¡å¼é…ç½®
extraction_modes:
  content_summary:
    prompt: "è¯·ä¸ºä»¥ä¸‹å†…å®¹ç”Ÿæˆä¸€ä¸ªç®€æ´çš„æ‘˜è¦..."
  key_points:
    prompt: "è¯·ä»ä»¥ä¸‹å†…å®¹ä¸­æå–å…³é”®è¦ç‚¹..."
```

### 2. æ”¯æŒçš„ LLM æä¾›å•†

- **OpenAI**: GPT-3.5/GPT-4 ç³»åˆ—æ¨¡å‹
- **æœ¬åœ° LLM**: é€šè¿‡ Ollama ç­‰æœ¬åœ°æœåŠ¡
- **å…¶ä»–å…¼å®¹ OpenAI API çš„æœåŠ¡**

### 3. é…ç½®æ­¥éª¤

1. å¤åˆ¶é…ç½®æ–‡ä»¶æ¨¡æ¿
2. å¡«å…¥ä½ çš„ API å¯†é’¥
3. é€‰æ‹©åˆé€‚çš„æ¨¡å‹
4. æ ¹æ®éœ€è¦è°ƒæ•´æç¤ºè¯

## ä½¿ç”¨æ–¹æ³•

### åŸºç¡€ç½‘é¡µæŠ“å– + AI åˆ†æ

```bash
# è¿è¡Œè¯¦ç»†æ¼”ç¤ºï¼ˆåŒ…å«å®Œæ•´çš„ AI åŠŸèƒ½ï¼‰
python markdown/content_source_example.py

# è¿è¡Œç®€åŒ–æ¼”ç¤ºï¼ˆå¿«é€Ÿä½“éªŒ AI åŠŸèƒ½ï¼‰
python markdown/content_source_short_example.py
```

### AI åŠŸèƒ½ç‰¹æ€§

#### 1. æ™ºèƒ½å†…å®¹åˆ†æ
- **å†…å®¹æ‘˜è¦**: è‡ªåŠ¨ç”Ÿæˆç½‘é¡µå†…å®¹çš„ç®€æ´æ‘˜è¦
- **å…³é”®ç‚¹æå–**: è¯†åˆ«å¹¶æå–å†…å®¹ä¸­çš„é‡è¦ä¿¡æ¯ç‚¹
- **ç»“æ„åŒ–æ•°æ®æå–**: å°†éç»“æ„åŒ–å†…å®¹è½¬æ¢ä¸ºç»“æ„åŒ–æ•°æ®

#### 2. å¤šæ¨¡å¼æå–
- **content_summary**: ç”Ÿæˆå†…å®¹æ‘˜è¦
- **key_points**: æå–å…³é”®è¦ç‚¹
- **structured_data**: ç»“æ„åŒ–æ•°æ®æå–
- **custom**: è‡ªå®šä¹‰æå–æ¨¡å¼

#### 3. çµæ´»çš„ LLM é›†æˆ
- æ”¯æŒå¤šç§ LLM æä¾›å•†
- å¯é…ç½®çš„æ¨¡å‹å‚æ•°
- è‡ªå®šä¹‰æç¤ºè¯æ¨¡æ¿
- é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶

## ä¸‰ç§å†…å®¹æºæ¨¡å¼å¯¹æ¯”

| æ¨¡å¼ | æè¿° | é€‚ç”¨åœºæ™¯ | AI åˆ†ææ•ˆæœ |
|------|------|----------|-------------|
| **cleaned_html** | æ¸…ç†åçš„HTMLï¼ˆé»˜è®¤ï¼‰ | ä¸€èˆ¬ç½‘é¡µå†…å®¹æå– | â­â­â­â­â­ æœ€ä½³ |
| **raw_html** | åŸå§‹HTML | éœ€è¦ä¿ç•™å®Œæ•´ç»“æ„ | â­â­â­ è‰¯å¥½ |
| **fit_html** | é€‚é…HTML | ç»“æ„åŒ–æ•°æ®æå– | â­â­â­â­ ä¼˜ç§€ |

## è¾“å‡ºæ–‡ä»¶è¯´æ˜

### å‘½ä»¤è¡Œæ–¹å¼è¾“å‡º

è¿è¡Œè„šæœ¬åï¼Œä¼šåœ¨ `doc/crawl_results_YYYYMMDD_HHMMSS/` ç›®å½•ä¸‹ç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š

```
crawl_results_20240101_120000/
â”œâ”€â”€ markdown_default_20240101_120000.md      # é»˜è®¤æ¨¡å¼ç”Ÿæˆçš„ Markdown
â”œâ”€â”€ markdown_raw_20240101_120000.md          # åŸå§‹ HTML æ¨¡å¼
â”œâ”€â”€ markdown_fit_20240101_120000.md          # é€‚é… HTML æ¨¡å¼
â”œâ”€â”€ ai_content_summary_20240101_120000.md    # AI å†…å®¹æ‘˜è¦
â”œâ”€â”€ ai_key_points_20240101_120000.md         # AI å…³é”®ç‚¹æå–
â””â”€â”€ ai_structured_data_20240101_120000.md    # AI ç»“æ„åŒ–æ•°æ®
```

### HTTP API æ–¹å¼è¾“å‡º

é€šè¿‡ API è°ƒç”¨æ—¶ï¼Œä¼šåœ¨ `doc/server_results_YYYYMMDD_HHMMSS/` ç›®å½•ä¸‹ç”Ÿæˆï¼š

```
server_results_20240101_120000/
â”œâ”€â”€ markdown_cleaned_html_20240101_120000.md  # Markdown å†…å®¹
â”œâ”€â”€ ai_structured_data_20240101_120000.md     # AI åˆ†æç»“æœ
â”œâ”€â”€ ai_content_summary_20240101_120000.md     # AI æ‘˜è¦
â”œâ”€â”€ ai_key_points_20240101_120000.md          # AI å…³é”®ç‚¹
â””â”€â”€ complete_results_20240101_120000.json     # å®Œæ•´ç»“æœ JSON
```

## API å“åº”æ ¼å¼

### æˆåŠŸå“åº”ç¤ºä¾‹

```json
{
  "success": true,
  "url": "https://example.com",
  "timestamp": "20240101_120000",
  "markdown_content": "# ç½‘é¡µæ ‡é¢˜\n\nç½‘é¡µå†…å®¹...",
  "ai_results": {
    "structured_data": {
      "success": true,
      "content": "æå–çš„ç»“æ„åŒ–æ•°æ®...",
      "provider": "qwen",
      "model": "qwen-turbo",
      "mode": "structured_data"
    },
    "content_summary": {
      "success": true,
      "content": "å†…å®¹æ‘˜è¦...",
      "provider": "qwen",
      "model": "qwen-turbo", 
      "mode": "content_summary"
    }
  },
  "saved_files": [
    "path/to/markdown_file.md",
    "path/to/ai_result.md"
  ]
}
```

### é”™è¯¯å“åº”ç¤ºä¾‹

```json
{
  "success": false,
  "url": "https://example.com",
  "timestamp": "20240101_120000",
  "error": "ç½‘é¡µçˆ¬å–å¤±è´¥: è¿æ¥è¶…æ—¶"
```

## æŠ€æœ¯ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- âœ… å¼‚æ­¥ç½‘é¡µæŠ“å–ï¼Œæé«˜å¤„ç†æ•ˆç‡
- âœ… æ™ºèƒ½ Markdown è½¬æ¢ï¼Œä¿æŒå†…å®¹ç»“æ„
- âœ… å¤šç§å†…å®¹æºé…ç½®ï¼Œé€‚åº”ä¸åŒéœ€æ±‚
- âœ… AI æ™ºèƒ½åˆ†æï¼Œæå–æœ‰ä»·å€¼ä¿¡æ¯
- âœ… è‡ªåŠ¨æ–‡ä»¶ä¿å­˜ï¼Œä¾¿äºç»“æœç®¡ç†
- âœ… æ—¶é—´æˆ³å‘½åï¼Œé¿å…æ–‡ä»¶è¦†ç›–
- ğŸŒ HTTP API æœåŠ¡ï¼Œæ”¯æŒè¿œç¨‹è°ƒç”¨
- ğŸ“¡ RESTful æ¥å£è®¾è®¡ï¼Œæ˜“äºé›†æˆ

### AI å¢å¼ºåŠŸèƒ½
- ğŸ¤– **å¤š LLM æ”¯æŒ**: OpenAIã€æœ¬åœ°æ¨¡å‹ã€é€šä¹‰åƒé—®ç­‰
- ğŸ§  **æ™ºèƒ½æå–**: å†…å®¹æ‘˜è¦ã€å…³é”®ç‚¹è¯†åˆ«
- ğŸ“Š **ç»“æ„åŒ–åˆ†æ**: å°†å†…å®¹è½¬æ¢ä¸ºç»“æ„åŒ–æ•°æ®
- âš™ï¸ **é…ç½®é©±åŠ¨**: é€šè¿‡ YAML æ–‡ä»¶çµæ´»é…ç½®
- ğŸ”„ **é”™è¯¯æ¢å¤**: å®Œå–„çš„å¼‚å¸¸å¤„ç†æœºåˆ¶
- ğŸ“ **è¯¦ç»†æ—¥å¿—**: å®Œæ•´çš„å¤„ç†è¿‡ç¨‹è®°å½•

### ç¼–ç ç‰¹æ€§
- ğŸŒ å®Œæ•´çš„ UTF-8 æ”¯æŒï¼Œå¤„ç†ä¸­æ–‡å†…å®¹æ— éšœç¢
- ğŸ“ æ™ºèƒ½ç›®å½•ç®¡ç†ï¼Œè‡ªåŠ¨åˆ›å»ºæ—¶é—´æˆ³æ–‡ä»¶å¤¹
- ğŸ›¡ï¸ å¥å£®çš„é”™è¯¯å¤„ç†ï¼Œç¡®ä¿ç¨‹åºç¨³å®šè¿è¡Œ
- ğŸ“Š è¯¦ç»†çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œäº†è§£å¤„ç†ç»“æœ
- ğŸ”§ æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºæ‰©å±•å’Œç»´æŠ¤
- ğŸ“‚ æœ‰åºæ–‡ä»¶ç»„ç»‡ï¼ŒæŒ‰æ—¶é—´æˆ³åˆ†ç±»å­˜å‚¨
- ğŸš€ å¼‚æ­¥å¤„ç†æ¶æ„ï¼Œæå‡å¹¶å‘æ€§èƒ½

## æ³¨æ„äº‹é¡¹

### AI åŠŸèƒ½ä½¿ç”¨å‰æ
1. **API å¯†é’¥é…ç½®**: ç¡®ä¿åœ¨ `config/ai_config.yaml` ä¸­æ­£ç¡®é…ç½®äº† LLM æä¾›å•†çš„ API å¯†é’¥
2. **ç½‘ç»œè¿æ¥**: AI åŠŸèƒ½éœ€è¦ç¨³å®šçš„ç½‘ç»œè¿æ¥ï¼ˆä½¿ç”¨åœ¨çº¿ LLM æœåŠ¡æ—¶ï¼‰
3. **æ¨¡å‹å¯ç”¨æ€§**: ç¡®è®¤æ‰€é…ç½®çš„ LLM æ¨¡å‹æœåŠ¡æ­£å¸¸è¿è¡Œ

### HTTP æœåŠ¡ä½¿ç”¨æ³¨æ„
1. **ç«¯å£å ç”¨**: ç¡®ä¿æŒ‡å®šç«¯å£æœªè¢«å…¶ä»–ç¨‹åºå ç”¨
2. **é˜²ç«å¢™è®¾ç½®**: å¦‚éœ€å¤–éƒ¨è®¿é—®ï¼Œè¯·é…ç½®é˜²ç«å¢™è§„åˆ™
3. **å¹¶å‘é™åˆ¶**: æœåŠ¡å™¨æ”¯æŒå¹¶å‘è¯·æ±‚ï¼Œä½†å»ºè®®æ§åˆ¶å¹¶å‘æ•°é‡
4. **æ–‡ä»¶å­˜å‚¨**: é•¿æœŸè¿è¡Œéœ€å®šæœŸæ¸…ç†ç”Ÿæˆçš„æ–‡ä»¶

### æ€§èƒ½ä¼˜åŒ–å»ºè®®
- å¯¹äºå¤§é‡å†…å®¹å¤„ç†ï¼Œå»ºè®®ä½¿ç”¨æœ¬åœ° LLM ä»¥é™ä½ API è°ƒç”¨æˆæœ¬
- å¯æ ¹æ®å†…å®¹ç±»å‹é€‰æ‹©æœ€é€‚åˆçš„å†…å®¹æºæ¨¡å¼
- æ¯æ¬¡è¿è¡Œä¼šåˆ›å»ºæ–°çš„æ—¶é—´æˆ³æ–‡ä»¶å¤¹ï¼Œä¾¿äºç»“æœç®¡ç†å’Œç‰ˆæœ¬å¯¹æ¯”
- å®šæœŸæ¸…ç† `doc/` ç›®å½•ä¸‹çš„æ—§æ–‡ä»¶å¤¹ä»¥èŠ‚çœå­˜å‚¨ç©ºé—´
- HTTP æœåŠ¡å»ºè®®ä½¿ç”¨åå‘ä»£ç†ï¼ˆå¦‚ Nginxï¼‰è¿›è¡Œç”Ÿäº§éƒ¨ç½²

### æ•…éšœæ’é™¤
- å¦‚æœ AI åŠŸèƒ½æ— æ³•æ­£å¸¸å·¥ä½œï¼Œè¯·æ£€æŸ¥é…ç½®æ–‡ä»¶ä¸­çš„ API å¯†é’¥å’ŒæœåŠ¡åœ°å€
- ç½‘ç»œè¿æ¥é—®é¢˜å¯èƒ½å¯¼è‡´ AI åˆ†æå¤±è´¥ï¼Œç¨‹åºä¼šç»§ç»­æ‰§è¡ŒåŸºç¡€åŠŸèƒ½
- æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºçš„è¯¦ç»†æ—¥å¿—ä¿¡æ¯ä»¥è¯Šæ–­é—®é¢˜
- HTTP æœåŠ¡å¯åŠ¨å¤±è´¥æ—¶ï¼Œæ£€æŸ¥ç«¯å£å ç”¨å’Œæƒé™é—®é¢˜

## è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ç”¨äºå­¦ä¹ å’Œæ¼”ç¤ºç›®çš„ã€‚

## è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®ã€‚

---

*æœ€åæ›´æ–°ï¼š2025å¹´1æœˆ*